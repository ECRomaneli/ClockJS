"use strict";var InSeconds,Month,Weekday;!function(e){e[e.Year=3154e4]="Year",e[e.Month=2628e3]="Month",e[e.Week=604800]="Week",e[e.Day=86400]="Day",e[e.Hour=3600]="Hour",e[e.Minute=60]="Minute",e[e.Second=1]="Second"}(InSeconds||(InSeconds={})),function(e){e[e.January=0]="January",e[e.February=1]="February",e[e.March=2]="March",e[e.April=3]="April",e[e.May=4]="May",e[e.June=5]="June",e[e.July=6]="July",e[e.August=7]="August",e[e.September=8]="September",e[e.October=9]="October",e[e.November=10]="November",e[e.December=11]="December"}(Month||(Month={})),function(e){e[e.Sunday=0]="Sunday",e[e.Monday=1]="Monday",e[e.Tuesday=2]="Tuesday",e[e.Wednesday=3]="Wednesday",e[e.Thursday=4]="Thursday",e[e.Friday=5]="Friday",e[e.Saturday=6]="Saturday"}(Weekday||(Weekday={}));var ClockJS=function(){function o(){this._id=null,this._timeout=50,this._cache={lastDayOfMonth:[]},this._speed=1,this._listeners=[]}return o.prototype.alreadyStarted=function(){return!!this._id},o.prototype.start=function(e){var t=this;return this._id?console.info("This clock is already started!"):(o.isSet(e)&&(this._speed=e),this._id=setInterval(function(){t.tick()},this.clockTick),this.trigger("start")),this},o.prototype.tick=function(){var e=new Date(this.timestamp);this.timestamp+=this.speed*this.clockTick,this.trigger("ticking");var t=this.seconds===e.getSeconds(),r=this.minutes===e.getMinutes(),n=this.hours===e.getHours(),i=this.day===e.getDate(),o=this.weekday===e.getDay(),s=this.month===e.getMonth(),a=this.year===e.getFullYear();return t&&r&&n&&i&&o&&s&&a||this.trigger("second"),r&&n&&i&&o&&s&&a||this.trigger("minute"),n&&i&&o&&s&&a||this.trigger("hour"),i&&o&&s&&a||this.trigger("day"),o&&s&&a||this.trigger("weekday"),s&&a||this.trigger("month"),a||this.trigger("year"),this},o.prototype.stop=function(){return this._id?(clearInterval(this._id),this._id=null,this.trigger("stop")):console.info("This clock is already stopped!"),this},o.prototype.on=function(e,t){var r=this;return e.split(" ").forEach(function(e){r.getListeners(e).push(t)}),this},o.prototype.off=function(e,n){var i=this;return e?(e.split(" ").forEach(function(e){var t=i.getListeners(e);if(!n)return i.clearListeners(e);var r=t.indexOf(n);0<=r&&i.getListeners(e).splice(r,1)}),this):this.clearListeners()},o.prototype.trigger=function(e,t){var r=this;return void 0===t&&(t=[this]),t.unshift(e),this.getListeners(e).forEach(function(e){return e.apply(r,t)}),this},o.prototype.format=function(e){var n=this;return e.replace(/MONTH|WEEKDAY|[usmhHdDwWMyY]+|TZD/g,function(e){var t=e.charAt(0),r=e.length;return"Y"===t.toUpperCase()?o.pad(n.year,r):"M"===t?r<3?o.pad(n.month,r):3<r?n.monthName:n.monthName.substr(0,3):"W"===t.toUpperCase()?r<3?o.pad(n.weekday,r):3<r?n.weekdayName:n.weekdayName.substr(0,3):"D"===t.toUpperCase()?o.pad(n.day,r):"H"===t?o.pad(n.hours%12,r):"h"===t?o.pad(n.hours,r):"m"===t?o.pad(n.minutes,r):"s"===t?o.pad(n.seconds,r):"u"===t?o.pad(n.milliseconds/10,3,!0):n.timezone})},o.prototype.getListeners=function(e){return o.isSet(this._listeners[e])?this._listeners[e]:this._listeners[e]=[]},o.prototype.setDateFromTimestamp=function(e){var t=new Date(e);this._year=t.getFullYear(),this._month=t.getMonth(),this._weekday=t.getDay(),this._day=t.getDate(),this._hours=t.getHours(),this._minutes=t.getMinutes(),this._seconds=t.getSeconds(),this._milliseconds=t.getMilliseconds(),this._timezone=t.getTimezoneOffset(),this._timestamp=e},o.prototype.clearListeners=function(e){return e?this._listeners[e]=[]:this._listeners=[],this},o.prototype.remainder=function(e){return this.timestamp/(1e3*e)%1},o.lastDayOfMonth=function(e,t){return new Date(t,e+1,0).getDate()},o.timestampNow=function(){var e=window.performance;return e&&e.now&&e.timing&&e.timing.navigationStart?e.now()+e.timing.navigationStart:Date.now()},o.fromTimestamp=function(e){var t=new o;return t.setDateFromTimestamp(e),t},o.now=function(){return o.fromTimestamp(o.timestampNow())},o.pad=function(e,t,r){if(void 0===r&&(r=!1),!e&&0!=e)return o.pad(0,t,r);var n="";e=parseInt(e);for(var i=0;i<t;i++)n+="0";return r?(e+n).slice(0,t):(n+e).slice(-1*t)},o.isSet=function(e){return void 0!==e},Object.defineProperty(o.prototype,"year",{get:function(){return this._year},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"yearFloat",{get:function(){return this._year+this.monthFloat/12},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"month",{get:function(){return this._month},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"monthFloat",{get:function(){return this._month+this.dayFloat/this.lastDayOfMonth},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"monthName",{get:function(){return Month[this._month]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"weekday",{get:function(){return this._weekday},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"weekdayFloat",{get:function(){return this._weekday+this.hoursFloat/24},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"weekdayName",{get:function(){return Weekday[this._weekday]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"lastDayOfMonth",{get:function(){var e=this._cache.lastDayOfMonth;return e&&e[0]===this.month&&e[1]===this.year||(e=[this.month,this.year,o.lastDayOfMonth(this.month,this.year)]),e[2]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"day",{get:function(){return this._day},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dayFloat",{get:function(){return this._day+this.hoursFloat/24},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hours",{get:function(){return this._hours},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hoursFloat",{get:function(){return this._hours+this.minutesFloat/60},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"minutes",{get:function(){return this._minutes},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"minutesFloat",{get:function(){return this._minutes+this.secondsFloat/60},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"seconds",{get:function(){return this._seconds},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"secondsFloat",{get:function(){return this._seconds+this.remainder(InSeconds.Second)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"milliseconds",{get:function(){return this._milliseconds},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"timezone",{get:function(){var e=this._timezone,t="";return 0===e?"Z":(0<e&&(t="+"),""+t+o.pad(e/60,2)+":"+o.pad(e%60,2))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"timestamp",{get:function(){return this._timestamp},set:function(e){this.setDateFromTimestamp(e)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dateTime",{get:function(){return this.format("YYYY-MM-DDThh:mm:ss.uTZD")},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"speed",{get:function(){return this._speed},set:function(e){59<e&&console.warn("The speed defines how many seconds will be advanced when the clock ticks. For performance questions, numbers above 59 will not call more than one event per tick."),this._speed=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"clockTick",{get:function(){return this._timeout},set:function(e){(e<20||1e3<e)&&console.warn('Because the interval proccess and the clock seconds, the tick is recommended to be between 20 and 1000 milliseconds. Values less than 20, may cause performance problem with "ticking" events');var t=!!this._id;t&&this.stop(),this._timeout=e,t&&this.start()},enumerable:!0,configurable:!0}),o}();